@import nib

@import colors
@import fonts
@import "font-smoothing"
@import media-query-variables

hoverBoxShadow = 0 .1875em .375em -.1875em rgba(0, 0, 0, .325)
activeBoxShadow = inset 0 .125em .375em rgba(0, 0, 0, .325)

buttonFocus(backgroundColor)
  focusRingBoxShadows = inset 0 0 0 .125em backgroundColor, inset 0 0 0 .1875em #fff

  &:focus
    outline none
    box-shadow focusRingBoxShadows

    &:hover
      box-shadow focusRingBoxShadows, hoverBoxShadow

    &:active
      box-shadow activeBoxShadow

button, .button
  subpixelAntialiasedFonts()
  text-rendering optimizeLegibility
  -webkit-tap-highlight-color transparent
  user-select none
  appearance none
  display inline-block
  cursor pointer
  border 0
  border-radius .1875em
  font-size 1em
  padding .6em 2em
  margin 0
  text-align center
  font-family sansSerifFonts
  font-weight 300
  letter-spacing .04em
  text-indent .04em
  text-decoration none

  // Useful utility until this Chrome bug is fixed
  // https://code.google.com/p/chromium/issues/detail?id=406658
  &.nowrap
    white-space nowrap
    max-width 100%

  @media chromeAndSafariOnlyQuery
    font-weight 400

  @media chromeOnlyQuery
    font-weight 300

  &:hover
    text-decoration none

  &[disabled]
    opacity .7

    &:hover, &:focus, &:focus:hover
      box-shadow none !important

  &:hover
    box-shadow hoverBoxShadow

    &:active
      box-shadow activeBoxShadow

  &.primary
    background primaryButtonColor
    buttonFocus primaryButtonColor
    color #fff

    &.fancy
      background linear-gradient(45deg, logoPurple, logoBlue)

      &:active
        background primaryButtonColor

  &.secondary
    background secondaryButtonColor
    buttonFocus secondaryButtonColor
    color #fff

  &.tertiary
    background tertiaryButtonColor
    buttonFocus tertiaryButtonColor
    color #fff

  &.black
    background #000
    buttonFocus #000
    color #fff

  &.transparent
    font-weight 400

    &:not(:hover):not(:active):not(:focus)
      antialiasedFonts()
      background transparent
      box-shadow inset 0 0 0 1px lightLineGray
      color #555

  &.small
    font-size .9em
    border-radius .2083em
    letter-spacing .06em
    text-indent .06em

  &.large
    font-size 1.25em

  &.small-action-button
    text-transform uppercase
    letter-spacing .06em
    text-indent .06em
    line-height 1
    font-size .9em
    padding .3333em .3333em .24em
    font-weight 100

    &:not(:hover):not(:active):not(:focus):not(.active)
      antialiasedFonts()
      background transparent
      box-shadow inset 0 0 0 1px lightLineGray
      color #555
      font-weight 400
      letter-spacing .045em
      text-indent .045em

    @media desktopMinWidthQuery
      &.larger-on-desktop
        font-size 1em

    @media firefoxOnWindowsQuery
      antialiasedFonts()
      font-weight 400

    @media retinaQuery
      font-weight 300

    &.primary
      background brandPink

      &:active
        background brandPinkDarkened

    &.secondary:active
      background secondaryButtonColorDarkened

    &.tertiary:active
      background tertiaryButtonColorDarkened

  &.left-icon-shield-button
    position relative
    padding 1em 1.0625em 1.0625em 4.75em

    .icon-shield
      display block
      position absolute
      top 0
      bottom 0
      left 0
      width 3.75em
      background rgba(#000, .2)
      border-top-left-radius .1875em
      border-bottom-left-radius .1875em

      .icon
        position absolute
        width 2.5em
        height 2.5em
        top 0
        right 0
        bottom 0
        left 0
        margin auto
